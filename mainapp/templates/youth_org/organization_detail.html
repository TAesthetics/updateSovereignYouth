{% load i18n %}
{% extends 'youth_org/base.html' %}

{% block youth_content %}
    <div class="organization-detail" style="display: grid; grid-template-columns: 1fr 300px; gap: 2rem;">
        <div class="organization-info">
            <div style="display: flex; align-items: center; margin-bottom: 1.5rem;">
                {% if organization.logo %}
                    <img src="{{ organization.logo.url }}" alt="{{ organization.name }} logo" style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px; margin-right: 1.5rem;">
                {% endif %}
                <div>
                    <h1 style="margin: 0 0 0.5rem 0; color: #2c3e50;">{{ organization.name }}</h1>
                    <div style="display: flex; align-items: center; color: #7f8c8d; font-size: 0.95rem;">
                        <span style="margin-right: 1rem;"><i class="fas fa-map-marker-alt"></i> {{ organization.location }}</span>
                        <span><i class="fas fa-calendar-alt"></i> Founded {{ organization.founded_date|date:"F Y" }}</span>
                    </div>
                </div>
            </div>
            
            <div class="organization-description" style="margin-bottom: 2rem; line-height: 1.6; color: #2c3e50;">
                {{ organization.description|linebreaks }}
            </div>
            
            {% if organization.website %}
                <div class="organization-website" style="margin-bottom: 2rem;">
                    <a href="{{ organization.website }}" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; color: #4a6fa5; text-decoration: none;">
                        <i class="fas fa-external-link-alt" style="margin-right: 0.5rem;"></i> {{ organization.website }}
                    </a>
                </div>
            {% endif %}
            
            <div class="organization-actions" style="margin-top: 2rem; display: flex; gap: 1rem;">
                {% if user.is_authenticated %}
                    {% if not user.youth_profile or user.youth_profile.organization != organization %}
                        <a href="{% url 'youth-member-create' %}?org={{ organization.id }}" class="btn" style="background: #4a6fa5; color: white; padding: 0.75rem 1.5rem; border-radius: 4px; text-decoration: none; font-weight: 500; display: inline-flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-user-plus"></i>{% trans 'Join Organization' %}
                        </a>
                    {% else %}
                        <span class="btn" style="background: #27ae60; color: white; padding: 0.75rem 1.5rem; border-radius: 4px; font-weight: 500; display: inline-flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-check"></i>{% trans 'Member' %}
                        </span>
                    {% endif %}
                {% else %}
                    <a href="{% url 'login' %}?next={{ request.path }}" class="btn" style="background: #4a6fa5; color: white; padding: 0.75rem 1.5rem; border-radius: 4px; text-decoration: none; font-weight: 500; display: inline-flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-sign-in-alt"></i>{% trans 'Login to Join' %}
                    </a>
                {% endif %}
                
                {% if user.is_staff %}
                    <a href="{% url 'youth-organization-update' organization.pk %}" class="btn" style="background: #f39c12; color: white; padding: 0.75rem 1.5rem; border-radius: 4px; text-decoration: none; font-weight: 500; display: inline-flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-edit"></i>{% trans 'Edit' %}
                    </a>
                {% endif %}
            </div>
        </div>
        
        <div class="organization-sidebar" style="background: #f8f9fa; border-radius: 8px; padding: 1.5rem; height: fit-content;">
            <div class="stats-card" style="margin-bottom: 1.5rem;">
                <h3 style="margin-top: 0; color: #2c3e50; border-bottom: 1px solid #e0e0e0; padding-bottom: 0.75rem; margin-bottom: 1rem;">{% trans 'Organization Stats' %}</h3>
                <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #7f8c8d;">{% trans 'Total Members:' %}</span>
                        <span style="font-weight: 500; color: #2c3e50;">{{ organization.member_count }}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #7f8c8d;">{% trans 'Status:' %}</span>
                        <span style="font-weight: 500; color: {% if organization.is_active %}#27ae60{% else %}#e74c3c{% endif %};">
                            {{ organization.is_active|yesno:"Active,Inactive" }}
                        </span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #7f8c8d;">{% trans 'Founded:' %}</span>
                        <span style="font-weight: 500; color: #2c3e50;">{{ organization.founded_date|date:"F j, Y" }}</span>
                    </div>
                </div>
            </div>
            
            <div class="upcoming-events">
                <h3 style="margin-top: 0; color: #2c3e50; border-bottom: 1px solid #e0e0e0; padding-bottom: 0.75rem; margin-bottom: 1rem;">{% trans 'Upcoming Events' %}</h3>
                <div class="event-list" style="display: flex; flex-direction: column; gap: 1rem;">
                    <div class="event-item" style="background: white; border-radius: 6px; padding: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                        <div style="font-weight: 500; color: #2c3e50; margin-bottom: 0.5rem;">{% trans 'Cybersecurity Workshop' %}</div>
                        <div style="font-size: 0.9rem; color: #7f8c8d; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="far fa-calendar-alt"></i>{% trans 'June 15, 2023' %}
                        </div>
                    </div>
                    <div class="event-item" style="background: white; border-radius: 6px; padding: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
                        <div style="font-weight: 500; color: #2c3e50; margin-bottom: 0.5rem;">{% trans 'CTF Competition' %}</div>
                        <div style="font-size: 0.9rem; color: #7f8c8d; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="far fa-calendar-alt"></i>{% trans 'July 1, 2023' %}
                        </div>
                    </div>
                </div>
                <a href="#" style="display: inline-block; margin-top: 1rem; color: #4a6fa5; text-decoration: none; font-size: 0.9rem;">
                    View all events <i class="fas fa-arrow-right" style="margin-left: 0.25rem;"></i>
                </a>
            </div>
        </div>
    </div>
    
    {% if user.is_staff %}
        <div class="admin-actions" style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #e0e0e0;">
            <h3 style="margin-top: 0; color: #2c3e50; margin-bottom: 1rem;">{% trans 'Admin Actions' %}</h3>
            <div style="display: flex; gap: 1rem;">
                <a href="{% url 'admin:mainapp_youthorganization_change' organization.id %}" class="btn" style="background: #3498db; color: white; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 0.5rem;">
                    <i class="fas fa-cog"></i>{% trans 'Admin Panel' %}
                </a>
                {% if organization.is_active %}
                    <a href="#" class="btn" style="background: #e74c3c; color: white; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-ban"></i>{% trans 'Deactivate' %}
                    </a>
                {% else %}
                    <a href="#" class="btn" style="background: #27ae60; color: white; padding: 0.5rem 1rem; border-radius: 4px; text-decoration: none; font-size: 0.9rem; display: inline-flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-check"></i>{% trans 'Activate' %}
                    </a>
                {% endif %}
            </div>
        </div>
    {% endif %}
{% endblock %}
